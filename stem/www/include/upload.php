<?phpclass uploadSess extends user {	public function __construct(&$sdata) {		if (!$this->logged_in) // not logged in, return...			return false;		$data = $this->getUploaderData();		if ($data === false) 			return $false;		$sdata = array_merge($sdata, $data);				$this->session_update(&$sdata);		return true;	}	private function getUploaderData() {		$sesssql1 = "SELECT * FROM `kt_upload` WHERE upload_user = '{$this->data['user_id']}'";		$upload = $functions->sqlquery($sesssql1, true);				if (empty($upload))			return false;				$data = array('upload_id' => $upload[0]['upload_id'], 'upload_folder' => $upload[0]['upload_folder'], 'upload_pw' => $upload[0]['upload_pw']);				return $data;	}		public function uploadMeThis($file) {		$ext = strtolower(substr($_FILES['uploadedfile']['name'], -4));		if ($_POST['password'] == 'botch') {			// Where the file is going to be placed 			$target_path = "./";			/* Add the original filename to our target path.  	Result is "uploads/filename.extension" */			$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 			if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {				$error = 'Upload complete! You uploaded '.$_FILES['uploadedfile']['name'].' of MIME type '.$_FILES['uploadedfile']['type'].' and size '.($_FILES['uploadedfile']['size'] / 1024).' KB. Your file is available <a href="'.$_FILES['uploadedfile']['name'].'">here.</a><br /><br />';			} else{				$error = "There was an error uploading the file, please try again!";			}		} else $error = 'Upload failed. Extension error. Extension was '.htmlspecialchars($ext);	}}